<ion-view title="Service Worker Upload">
    <ion-content padding="true" class="has-header">




     <input type="file" multiple custom-on-change="uploadFile">

        <form class="list">

       <div flow-init="{
                    target: '/rtmsg/upload',
                    chunkSize: 1*512,
                    simultaneousUploads: 1,
                    query:{upload_token_rr:'my_token'},
                    permanentErrors: [999]
                }"
                
                flow-file-success="$file.msg = $message"
                flow-file-progress="someHandlerMethod( $file, $event, $flow )"
                flow-file-added="someHandlerMethod( $file, $event, $flow )"
                flow-files-added="someHandlerMethod( $files, $event, $flow )"
                flow-file-retry="someHandlerMethod( $file, $event, $flow )"
                flow-file-error="someHandlerMethod( $file, $message, $flow )"
                flow-error="someHandlerMethod( $file, $message, $flow )"
                flow-complete="someHandlerMethod( $file, $message, $flow )"
                flow-upload-started="someHandlerMethod( $file, $message, $flow )"
                flow-progress="someHandlerMethod( $file, $message, $flow )"
                >
  <!-- flow-files-submitted="$flow.upload()" -->

  <input type="file" flow-btn/>
  Input OR Other element as upload button
  <span class="btn" flow-btn>Upload File</span>

  <a class="button button-positive" ng-click="$flow.upload()">UploadALL!!!!</a>
  <a class="button button-positive" ng-click="uploadViaWorker($flow)">UploadViaWorker</a>


  <table>
    <tr ng-repeat="file in $flow.files">
        <td>{{$index+1}}</td>
        <td>{{file.name}}</td>
        <td>{{file.msg}}</td>
    </tr>
  </table>


<p>
    <a class="btn btn-small btn-success" ng-click="$flow.resume()">Upload</a>
    <a class="btn btn-small btn-danger" ng-click="$flow.pause()">Pause</a>
    <a class="btn btn-small btn-info" ng-click="$flow.cancel()">Cancel</a>
    <span class="label label-info">Size: {{$flow.getSize()}}</span>
    <span class="label label-info">Is Uploading: {{$flow.isUploading()}}</span>
  </p>

<table class="table table-hover table-bordered table-striped" flow-transfers>
    <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Size</th>
      <th>Relative Path</th>
      <th>Unique Identifier</th>
      <th>#Chunks</th>
      <th>Progress</th>
      <th>Paused</th>
      <th>Uploading</th>
      <th>Completed</th>
      <th>Settings</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="file in transfers">
      <td>{{$index+1}}</td>
      <td>{{file.name}}</td>
      <td>{{file.size}}</td>
      <td>{{file.relativePath}}</td>
      <td>{{file.uniqueIdentifier}}</td>
      <td>{{file.chunks.length}}</td>
      <td>{{file.progress()}}</td>
      <td>{{file.paused}}</td>
      <td>{{file.isUploading()}}</td>
      <td>{{file.isComplete()}}</td>
      <td>
        <div class="btn-group">
          <a class="button button-balanced" ng-click="file.pause()" ng-hide="file.paused">
            Pause
          </a>
          <a class="button button-assertive" ng-click="file.resume()" ng-show="file.paused">
            Resume
          </a>
          <a class="button " ng-click="file.cancel()">
            Cancel
          </a>
          <a class="button button-positive" ng-click="file.retry()" ng-show="file.error">
            Retry
          </a>
        </div>
      </td>
    </tr>
    </tbody>
  </table>

</div>
      
            <label class="item item-input" name="UserName">
                <span class="input-label">Name</span>
                <input type="text" placeholder="UserName" ng-model="userData.userName">
                <span class="badge badge-assertive">{{msg.freemem}}</span>
            </label>
            <label class="item item-input" name="ChannelName">
                <span class="input-label">Channel</span>
                <input type="text" placeholder="ChannelName" ng-model="userData.channelId">
            </label>
            <div class="item item-input item-button-right" name="MessageTXT">
                <span class="input-label">Message</span>
                <input type="text" placeholder="Message2Send" ng-model="userData.message">
                <button class="button button-positive" ng-click="sendMessage2RoomAction()">
                    <i class="icon ion-play"></i>
                </button>
            </div>
            <div class="button-bar">
                <button class="button button-balanced button-block  icon ion-play" ng-click="connectAction()"></button>
                <button class="button button-assertive button-block  icon ion-stop" ng-click="disconnectAction()"></button>
                <button class="button button-positive button-block  icon ion-stats-bars" ng-click="statsAction()"></button>
<!--

                <button class="button button-calm button-block  icon ion-share" ng-click="sendMessageAction()"></button>
                <button class="button button-calm button-block  icon ion-share" ng-click="fakeAction()"></button>

-->                
            </div>
        <!--
            <button ng-model="button" ng-disabled="getConnected">Button</button>
        -->

<!--
        <label class="item item-input" name="user">
            <span class="input-label">Users</span>
            <select ng-model="currentUser" ng-options="item.userName for item in userList">
                <option value="">-- choose user --</option>
            </select>
        </label>

        <label class="item item-input" name="channel">
            <span class="input-label">Channels</span>
            <select ng-model="currentChannel" ng-options="item.channelId for item in channelList">
                <option value="">-- choose channel --</option>
            </select>
        </label>

            <label class="item item-input" name="userOnChannel">
                <span class="input-label">userOnChannel</span>
                <select ng-model="currentUserOnChannel" ng-options="item.userOnChannel for item in userOnChannelList">
                    <option value="">-- choose Uuser-Channel --</option>
                </select>
            </label>

-->

<!--
            <select ng-model="currentUser" ng-options="color.name group by color.shade for color in colors">
            </select>
  
      
            <label class="item item-input" name="Freemem">
                <span class="input-label">heartbeat</span><textarea placeholder="Log">{{msg.freemem}}</textarea>
            </label>
   

            <label class="item item-input" name="Log">
                <span class="input-label">log</span><textarea placeholder="Log">{{userData.dataList}}</textarea>
            </label>
            <label class="item item-input">
                <span class="input-label">text</span><textarea placeholder="">{{userData.sourceMsg}}</textarea>
            </label>
-->

        </form>


        <div class="list card">
          <a class="item" ng-repeat="item in chatData">
            <h2 ng-style="item.userName != userData.userName && {'text-align': 'right'}">{{item.userName}}</h2>
            <p  ng-style="item.userName != userData.userName && {'text-align': 'right'}" >{{item.msg}}</p>
          </a>              
        </div>
        <div class="item item-input item-button-right" name="MessageTXT">
                <span class="input-label">WebWorker-Message</span>
                <input type="text" placeholder="Message2Send" ng-model="userData.message">
                <button class="button button-positive" ng-click="sendMessage2WebWorker()">
                    <i class="icon ion-play"></i>
                </button>
        </div>
        <div class="item item-input item-button-right" name="MessageTXT">
                <span class="input-label">WebWorker-STATUS</span>
                <input type="text" placeholder="Message2Send" ng-model="userData.message">
                <button class="button button-positive" ng-click="showUploadStatusWorker()">
                    <i class="icon ion-play"></i>
                </button>
        </div>

        <div class="item item-input item-button-right" name="MessageTXT">
                <span class="input-label">CONFIGURE-WORKER</span>
                <input type="text" placeholder="Message2Send" ng-model="userData.message">
                <button class="button button-positive" ng-click="configureWorker()">
                    <i class="icon ion-play"></i>
                </button>
        </div>
<!--
        <div class="item">
          <p style="text-align: right">Mario</p>
          <h2 style="text-align: right">Marty McFly</h2>
        </div>

ng-class="{ 'fa-github'   : type === 0,
                          'fa-linkedin' : type === 1,
                          'fa-skype'    : type === 2,
                          'fa-google'   : type === 3 }"></i>

ng-style="myvar === 0 && {'background-color': 'red'} ||
                  myvar === 1 && {'background-color': 'green'} ||
                  myvar === 2 && {'background-color': 'yellow'}"


-->

    </ion-content>
</ion-view>